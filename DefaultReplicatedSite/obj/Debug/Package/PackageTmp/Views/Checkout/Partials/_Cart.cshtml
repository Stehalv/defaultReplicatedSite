@model CartModel
@if (Model.Order != null)
{
    @Html.Partial("Partials/_CartDetails", Model.Order)
}
@if (Model.AutoOrder.Items != null)
{
    @Html.Partial("Partials/_CartDetails", Model.AutoOrder)
}
    <script>
        var updateCartItemUrl = '@Url.Action("UpdateCartItem", "Shopping")';

        function registerEventHandlers() {
            $('[data-role="remove-item]').on("click", function () {
                var context = $(this).data("context");
                var orderType = $(this).data("ordertype");
                var id = $(this).data("id");
                $.ajax({
                    url: $(this).data("url"),
                    type: "POST",
                    success: function (response) {
                        if (response.success) {
                            $("#" + context + "-" + id).remove();
                            $(".total-sum-" + orderType).html(response.total);
                            $(".sub-total-" + orderType).html(response.subtotal);
                        }
                    }
                })
            });
            $('.edit-quantity').on("change", function () {
                console.log("edit-quantity");
                var context = $(this).data("context");
                var orderType = $(this).data("ordertype");
                var id = $(this).data("id");
                var type = $(this).data("type");
                var quantity = $(this).val();
                $.ajax({
                    url: updateCartItemUrl,
                    type: "POST",
                    data: { id: id, type: type, quantity: quantity },
                    success: function (response) {
                        if (response.success) {
                            $(".item-total" + context + "-" + id).html(response.itemTotal);
                            $(".total-sum-" + orderType).html(response.total);
                            $(".sub-total-" + orderType).html(response.subtotal);
                        }
                    }
                })
            });
        }
        registerEventHandlers();
    </script>